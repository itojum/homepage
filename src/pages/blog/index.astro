---
import { getBlogs } from "@/libs/microcms";
import BaseLayout from "@/layouts/BaseLayout.astro";
import BlogsPage from "@/components/pages/blogs/BlogsPage.astro";

const PER_PAGE = 10;
const currentPage = 1;

const response = await getBlogs({
	orders: "-publishedAt",
	depth: 2,
	limit: PER_PAGE,
	offset: (currentPage - 1) * PER_PAGE,
});

const { contents: blogs, totalCount } = response;
const totalPages = Math.ceil(totalCount / PER_PAGE);
---

<BaseLayout
  title="Blog"
  description="itojum.dev のブログ記事一覧。技術メモや活動記録を掲載しています。"
  path="/blog"
>
  <BlogsPage blogs={blogs} currentPage={currentPage} totalPages={totalPages} />
</BaseLayout>
