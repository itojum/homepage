---
import HeaderLink from "@/components/ui/HeaderLink.astro";
import { Icon } from "astro-icon/components";
---

<div class="mobile-nav">
  <input
    id="nav-toggle"
    type="checkbox"
    class="nav-toggle"
    aria-label="メニューを開閉"
  />
  <label for="nav-toggle" class="menu-toggle">
    <span class="sr-only">メニュー</span>
    <span class="icon-hamburger">
      <Icon name="ri:menu-line" size={28} />
    </span>
    <span class="icon-close">
      <Icon name="ri:close-line" size={28} />
    </span>
  </label>
  <div class="mobile-menu">
    <HeaderLink href="/" class="mobile-link"> Home </HeaderLink>
    <HeaderLink href="/about" class="mobile-link"> About </HeaderLink>
    <HeaderLink href="/blog" class="mobile-link"> Blog </HeaderLink>
    <HeaderLink href="/contact" class="mobile-link"> Contact </HeaderLink>
  </div>
</div>

<style>
  .mobile-nav {
    @apply flex md:hidden items-center;
  }

  .nav-toggle {
    display: none;
  }

  .menu-toggle {
    @apply flex md:hidden items-center justify-center p-2 cursor-pointer;
  }

  .mobile-link {
    @apply block py-3 px-4 text-[1.05rem] font-medium text-[rgb(var(--gray-dark))] no-underline text-center rounded-lg mx-4;
    transition:
      background-color 150ms ease-out,
      transform 150ms ease-out;
  }

  .mobile-link:hover {
    @apply bg-[rgb(var(--gray-light))];
    transform: translateY(-1px);
  }

  .mobile-menu {
    @apply hidden md:hidden;
  }

  .nav-toggle:checked ~ .mobile-menu {
    @apply flex flex-col gap-4;
    position: absolute;
    left: 0;
    right: 0;
    top: 100%; /* ヘッダー(nav)のすぐ下から表示 */
    @apply border-t pt-6 pb-10 px-0;
    background-color: rgba(var(--surface-overlay), 94%);
    border-color: rgba(var(--border), 90%);
    box-shadow: var(--box-shadow);
    backdrop-filter: blur(12px);
    overflow-y: auto;
  }

  #nav-toggle:checked + .menu-toggle .icon-hamburger {
    display: none;
  }

  #nav-toggle:checked + .menu-toggle .icon-close {
    @apply inline-flex;
  }

  .icon-close {
    @apply hidden;
  }
</style>
